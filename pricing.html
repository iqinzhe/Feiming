<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIY选项和定价</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="manifest" href="/icons/manifest.json">
    <link href="/css/style.css" rel="stylesheet">
    <!-- Load EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2.6.4/dist/email.min.js"></script>
    <style>
        /* 关于页面特有样式 */
        h1 {
            text-align: center;
            margin-bottom: 30px;
            padding: 0 20px;
        }
        form {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px;
        }
        /* 表格样式 */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        th, td {
            border: 1px solid rgba(255,255,255,0.2);
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: rgba(255,255,255,0.15);
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: rgba(255,255,255,0.05);
        }
        tr:hover {
            background-color: rgba(255,255,255,0.2);
        }
        .price {
            text-align: right;
            white-space: nowrap;
        }
        tr.selected {
            background-color: #d4edff !important;
            color: #000 !important;
        }
        .summary {
            position: sticky;
            bottom: 20px;
            background-color: #333;
            color: white;
            padding: 15px;
            border-radius: 4px;
            z-index: 100;
        }
        .category-desc {
            font-size: 14px;
            color: #ccc;
            margin-top: -10px;
            margin-bottom: 15px;
        }
        
        /* 菜单打开时页面锁定 */
        body.menu-open {
            overflow: hidden;
        }
        
        body.menu-open::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }
        
        /* Form input styles */
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="tel"],
        .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .form-group textarea {
            min-height: 100px;
        }
    </style>
</head>

<body>
<!-- 顶部栏 (与index.html保持一致) -->
<header class="site-topbar">
  <div class="topbar__left">
    <button aria-label="菜单" class="topbar__btn" id="topbarMenuBtn">☰</button>
  </div>
  <div class="topbar__center">
    <a href="index.html">
      <img class="topbar__logo" src="images/logo.png" alt="AX Guitar Logo"/>
    </a>
  </div>
  <div class="topbar__right">
    <button aria-label="搜索" class="topbar__btn" id="topbarSearchBtn">🔍</button>
    <button aria-label="分享" class="topbar__btn" id="topbarShareBtn">⤴</button>
  </div>
  <nav class="mobile-nav" id="mobileNav" aria-label="主导航">
    <ul class="mobile-nav__list">
      <li><a href="index.html">首页</a></li>
      <li><a href="instruments.html">产品</a></li>
      <li><a href="twisted-neck.html">特色</a></li>
      <li><a href="pricing.html">DIY选项</a></li>
      <li><a href="news.html">新闻</a></li>
      <li><a href="support.html">支持</a></li>
    </ul>
  </nav>
</header>

<!-- 主内容区 -->
<h1>DIY选项和定价</h1>

<form id="pricingForm">
    <div class="form-group">
        <label for="name">姓名：</label>
        <input type="text" id="name" name="name" required>
    </div>
    <div class="form-group">
        <label for="email">邮箱：</label>
        <input type="email" id="email" name="email" required>
    </div>
    <div class="form-group">
        <label for="phone">电话：</label>
        <input type="tel" id="phone" name="phone" required>
    </div>

    <h2>琴型</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>A-系列</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="1000">
            <td>B-系列</td>
            <td class="price">¥1000</td>
        </tr>
        <tr data-price="1500">
            <td>C-系列</td>
            <td class="price">¥1500</td>
        </tr>
        <tr data-price="0">
            <td>D-系列</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>AX Handmade Workshop</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="1500">
            <td>E-无头系列</td>
            <td class="price">¥1500</td>
        </tr>
    </table>

    <h2>弦数</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>6弦</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="1500">
            <td>7弦</td>
            <td class="price">¥1500</td>
        </tr>
    </table>

    <h2>连接方式</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>粘接</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>栓接</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>通颈</td>
            <td class="price">¥0</td>
        </tr>
    </table>

    <h2>琴颈木材</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>桤木</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>桃花芯</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="700">
            <td>沼泽梣木</td>
            <td class="price">¥700</td>
        </tr>
        <tr data-price="0">
            <td>安格斯</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>黑胡桃</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>其他</td>
            <td class="price">¥0</td>
        </tr>
    </table>

    <h2>琴体木材</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="1800">
            <td>虎纹枫木</td>
            <td class="price">¥1800</td>
        </tr>
        <tr data-price="3000">
            <td>絮状枫木</td>
            <td class="price">¥3000</td>
        </tr>
        <tr data-price="4000">
            <td>七叶树瘤</td>
            <td class="price">¥4000</td>
        </tr>
        <tr data-price="1900">
            <td>黑胡桃树瘤</td>
            <td class="price">¥1900</td>
        </tr>
        <tr data-price="1700">
            <td>渍纹枫木</td>
            <td class="price">¥1700</td>
        </tr>
        <tr data-price="0">
            <td>其他</td>
            <td class="price">¥0</td>
        </tr>
    </table>

    <h2>贴面木材</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>枫木</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="600">
            <td>多拼枫木</td>
            <td class="price">¥600</td>
        </tr>
        <tr data-price="1600">
            <td>多拼虎纹枫木</td>
            <td class="price">¥1600</td>
        </tr>
        <tr data-price="1500">
            <td>雀眼枫木</td>
            <td class="price">¥1500</td>
        </tr>
        <tr data-price="600">
            <td>加拿大枫木</td>
            <td class="price">¥600</td>
        </tr>
        <tr data-price="400">
            <td>烤枫木</td>
            <td class="price">¥400</td>
        </tr>
        <tr data-price="900">
            <td>鸡翅木</td>
            <td class="price">¥900</td>
        </tr>
        <tr data-price="7000">
            <td>碳纤维 (仅无头琴)</td>
            <td class="price">¥7000</td>
        </tr>
        <tr data-price="500">
            <td>雀眼枫木</td>
            <td class="price">¥500</td>
        </tr>
        <tr data-price="0">
            <td>印度玫瑰木</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>乌木</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="400">
            <td>十二雄蕊破布木</td>
            <td class="price">¥400</td>
        </tr>
        <tr data-price="600">
            <td>烤雀眼枫木</td>
            <td class="price">¥600</td>
        </tr>
        <tr data-price="0">
            <td>其他</td>
            <td class="price">¥0</td>
        </tr>
    </table>

    <h2>指板木材</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>标准</td>
            <td class="price">¥0</td>
        </tr>
    </table>

    <h2>定制选项</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="1500">
            <td>ax 3-Piece Body</td>
            <td class="price">¥1500</td>
        </tr>
        <tr data-price="1000">
            <td>Or Tone-block</td>
            <td class="price">¥1000</td>
        </tr>
    </table>

    <h2>品数</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>22品</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>24品</td>
            <td class="price">¥0</td>
        </tr>
    </table>

    <h2>品丝规格</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>标准</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="1500">
            <td>不锈钢</td>
            <td class="price">¥1500</td>
        </tr>
    </table>

    <h2>品丝宽度</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>品丝宽度 2.4</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>品丝宽度 2.7</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>品丝宽度 2.9</td>
            <td class="price">¥0</td>
        </tr>
    </table>

    <h2>中间木材</h2>
    <table>
        <tr>
            <td>标准</td>
            <td class="price">¥0</td>
        </tr>
    </table>

    <h2>两侧木材</h2>
    <table>
        <tr>
            <td>标准</td>
            <td class="price">¥0</td>
        </tr>
    </table>

    <h2>指板弧度</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>标准 10"</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="500">
            <td>Custom: 7.25" 9.5" 12" 14"</td>
            <td class="price">¥500</td>
        </tr>
        <tr data-price="1000">
            <td>混合弧度</td>
            <td class="price">¥1000</td>
        </tr>
    </table>

    <h2>品记</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>鲍鱼壳圆点</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>白贝圆点</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="1200">
            <td>鲍鱼壳方块</td>
            <td class="price">¥1200</td>
        </tr>
        <tr data-price="700">
            <td>白贝方块</td>
            <td class="price">¥700</td>
        </tr>
        <tr data-price="700">
            <td>贴面木质方块</td>
            <td class="price">¥700</td>
        </tr>
        <tr data-price="1000">
            <td>其他木质方块</td>
            <td class="price">¥1000</td>
        </tr>
        <tr data-price="0">
            <td>定制镶嵌</td>
            <td class="price">¥0</td>
        </tr>
    </table>

    <h2>旋钮以及拾音器外壳</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>标准</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="500">
            <td>木制旋钮</td>
            <td class="price">¥500</td>
        </tr>
        <tr data-price="1000">
            <td>木制拾音器壳</td>
            <td class="price">¥1000</td>
        </tr>
        <tr data-price="1500">
            <td>原位拾音器壳</td>
            <td class="price">¥1500</td>
        </tr>
        <tr data-price="700">
            <td>木制后盖板</td>
            <td class="price">¥700</td>
        </tr>
    </table>

    <h2>琴桥和卷弦器</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>固定</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="500">
            <td>两点单摇颤音</td>
            <td class="price">¥500</td>
        </tr>
        <tr data-price="500">
            <td>六点单摇颤音</td>
            <td class="price">¥500</td>
        </tr>
        <tr data-price="1000">
            <td>双摇颤音</td>
            <td class="price">¥1000</td>
        </tr>
        <tr data-price="0">
            <td>标准</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="300">
            <td>其他</td>
            <td class="price">¥300</td>
        </tr>
    </table>

    <h2>拾音器</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>FishMan</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="50">
            <td>Seymour Duncan</td>
            <td class="price">¥50</td>
        </tr>
        <tr data-price="0">
            <td>Dimarzio</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>EMG</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>标准拾音器列表</td>
            <td class="price">¥0</td>
        </tr>
    </table>

    <h2>电路</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>标准</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="200">
            <td>主动电路定制</td>
            <td class="price">¥200</td>
        </tr>
        <tr data-price="100">
            <td>被动电路定制</td>
            <td class="price">¥100</td>
        </tr>
    </table>

    <h2>油漆质感</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>哑光</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="1200">
            <td>亮光</td>
            <td class="price">¥1200</td>
        </tr>
        <tr data-price="700">
            <td>超薄哑光</td>
            <td class="price">¥700</td>
        </tr>
    </table>

    <h2>颜色</h2>
    <table>
        <tr>
            <th>选项</th>
            <th>价格</th>
        </tr>
        <tr data-price="0">
            <td>标准</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>金色</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>镀铬</td>
            <td class="price">¥0</td>
        </tr>
        <tr data-price="0">
            <td>黑色</td>
            <td class="price">¥0</td>
        </tr>
    </table>

    <div class="form-group">
        <label for="notes">备注：</label>
        <textarea id="notes" name="notes" rows="4" cols="50"></textarea>
    </div>

    <div class="summary">
        <span class="summary-label">总价：</span>
        <span class="summary-value" id="summaryPrice">¥0</span>
        <button type="button" id="submitBtn" style="margin-left:20px;padding:8px 16px;background:#28a745;color:#fff;border:none;border-radius:4px;cursor:pointer;">提交订单</button>
    </div>
</form>

<!-- 底部栏 -->
<footer class="site-bottombar" id="toTopBtn">
  <div class="bottombar__label">返回顶部</div>
  <img class="bottombar__logo" src="images/logo.png" alt="AX Guitar Logo"/>
</footer>

<script src="/js/main.js"></script>

<script>
// Initialize EmailJS with your User ID
(function() {
    emailjs.init("9mFxGUlwnnrz5WbL7");
})();

// 点击行高亮并更新总价
document.querySelectorAll("table").forEach(table => {
    let rows = table.querySelectorAll("tr[data-price]");
    rows.forEach(row => {
        row.addEventListener("click", () => {
            // 同类取消高亮
            rows.forEach(r => r.classList.remove("selected"));
            // 当前行高亮
            row.classList.add("selected");
            updateTotal();
        });
    });
});

function updateTotal() {
    let total = 0;
    document.querySelectorAll("tr.selected").forEach(row => {
        total += parseFloat(row.getAttribute("data-price") || 0);
    });
    document.getElementById("summaryPrice").textContent = "¥" + total;
}

// 点击提交订单按钮
document.getElementById("submitBtn").addEventListener("click", (e) => {
    e.preventDefault();
    
    // 验证必填字段
    const name = document.getElementById("name").value;
    const email = document.getElementById("email").value;
    const phone = document.getElementById("phone").value;
    
    if (!name || !email || !phone) {
        alert("请填写姓名、邮箱和电话");
        return;
    }
    
    // 收集所有选中的选项
    let selections = [];
    document.querySelectorAll("tr.selected").forEach(row => {
        const option = row.cells[0].textContent;
        const price = row.cells[1].textContent;
        selections.push(`${option} - ${price}`);
    });
    
    // 如果没有选择任何选项
    if (selections.length === 0) {
        alert("请至少选择一个选项");
        return;
    }
    
    // 准备发送邮件的数据
    const formData = {
        name: name,
        email: email,
        phone: phone,
        notes: document.getElementById("notes").value,
        selections: selections.join("\n"),
        total: document.getElementById("summaryPrice").textContent,
        to_email: "iqinzhe@gmail.com" // 你的接收邮箱
    };
    
    // 显示加载状态
    const submitBtn = document.getElementById("submitBtn");
    submitBtn.disabled = true;
    submitBtn.textContent = "发送中...";
    
    // 使用EmailJS发送邮件
    emailjs.send("service_6q2tc8m", "template_npq8364", formData)
        .then(function(response) {
            alert("订单提交成功！我们会尽快与您联系。");
            // 重置表单
            document.getElementById("pricingForm").reset();
            document.querySelectorAll("tr.selected").forEach(row => {
                row.classList.remove("selected");
            });
            document.getElementById("summaryPrice").textContent = "¥0";
        }, function(error) {
            alert("提交失败，请稍后再试。错误: " + JSON.stringify(error));
        })
        .finally(() => {
            submitBtn.disabled = false;
            submitBtn.textContent = "提交订单";
        });
});
</script>

</body>
</html>