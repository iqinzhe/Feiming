<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIYé€‰é¡¹å’Œå®šä»·</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="manifest" href="/icons/manifest.json">
    <link href="/css/style.css" rel="stylesheet">
    <!-- æ·»åŠ  EmailJS åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>
    <script>
        // åˆå§‹åŒ– EmailJS (æ›¿æ¢ YOUR_USER_ID ä¸ºä½ çš„å®é™… User ID)
        (function() {
            emailjs.init("iqinzhe@gmail.com");
        })();
    </script>
    <style>
        /* å…³äºé¡µé¢ç‰¹æœ‰æ ·å¼ */
        h1 {
            text-align: center;
            margin-bottom: 30px;
            padding: 0 20px;
        }
        form {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px;
        }
        /* è¡¨æ ¼æ ·å¼ */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        th, td {
            border: 1px solid rgba(255,255,255,0.2);
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: rgba(255,255,255,0.15);
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: rgba(255,255,255,0.05);
        }
        tr:hover {
            background-color: rgba(255,255,255,0.2);
        }
        .price {
            text-align: right;
            white-space: nowrap;
        }
        tr.selected {
            background-color: #d4edff !important;
            color: #000 !important;
        }
        .summary {
            position: sticky;
            bottom: 20px;
            background-color: #333;
            color: white;
            padding: 15px;
            border-radius: 4px;
            z-index: 100;
        }
        .category-desc {
            font-size: 14px;
            color: #ccc;
            margin-top: -10px;
            margin-bottom: 15px;
        }
        
        /* èœå•æ‰“å¼€æ—¶é¡µé¢é”å®š */
        body.menu-open {
            overflow: hidden;
        }
        
        body.menu-open::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }
    </style>
</head>

<body>
<!-- é¡¶éƒ¨æ  (ä¸index.htmlä¿æŒä¸€è‡´) -->
<header class="site-topbar">
  <div class="topbar__left">
    <button aria-label="èœå•" class="topbar__btn" id="topbarMenuBtn">â˜°</button>
  </div>
  <div class="topbar__center">
    <a href="index.html">
      <img class="topbar__logo" src="images/logo.png" alt="AX Guitar Logo"/>
    </a>
  </div>
  <div class="topbar__right">
    <button aria-label="æœç´¢" class="topbar__btn" id="topbarSearchBtn">ğŸ”</button>
    <button aria-label="åˆ†äº«" class="topbar__btn" id="topbarShareBtn">â¤´</button>
  </div>
  <nav class="mobile-nav" id="mobileNav" aria-label="ä¸»å¯¼èˆª">
    <ul class="mobile-nav__list">
      <li><a href="index.html">é¦–é¡µ</a></li>
      <li><a href="instruments.html">äº§å“</a></li>
      <li><a href="twisted-neck.html">ç‰¹è‰²</a></li>
      <li><a href="pricing.html">DIYé€‰é¡¹</a></li>
      <li><a href="news.html">æ–°é—»</a></li>
      <li><a href="support.html">æ”¯æŒ</a></li>
    </ul>
  </nav>
</header>

<!-- ä¸»å†…å®¹åŒº -->
<h1>DIYé€‰é¡¹å’Œå®šä»·</h1>

<form id="pricingForm">
    <div class="form-group">
        <label for="name">å§“åï¼š</label>
        <input type="text" id="name" name="name" required>
    </div>
    <div class="form-group">
        <label for="number">ç¼–å·ï¼š</label>
        <input type="text" id="number" name="number">
    </div>

    </div>
</form>

    <h2>ç´å‹</h2>
    <table>
        <tr>
            <th>é€‰é¡¹</th>
            <th>ä»·æ ¼</th>
        </tr>
        <tr data-price="0">
            <td>A-ç³»åˆ—</td>
            <td class="price">Â¥0</td>
        </tr>
        <tr data-price="1000">
            <td>B-ç³»åˆ—</td>
            <td class="price">Â¥1000</td>
        </tr>
        <tr data-price="1500">
            <td>C-ç³»åˆ—</td>
            <td class="price">Â¥1500</td>
        </tr>
        <tr data-price="0">
            <td>D-ç³»åˆ—</td>
            <td class="price">Â¥0</td>
        </tr>
        <tr data-price="0">
            <td>AX Handmade Workshop</td>
            <td class="price">Â¥0</td>
        </tr>
        <tr data-price="1500">
            <td>E-æ— å¤´ç³»åˆ—</td>
            <td class="price">Â¥1500</td>
        </tr>
    </table>

    <!-- å…¶ä»–è¡¨æ ¼ä¿æŒä¸å˜ -->
    <!-- ... -->

    <div class="form-group">
        <label for="notes">å¤‡æ³¨ï¼š</label>
        <textarea id="notes" name="notes" rows="4" cols="50"></textarea>
    </div>

    <div class="summary">
        <span class="summary-label">æ€»ä»·ï¼š</span>
        <span class="summary-value" id="summaryPrice">Â¥0</span>
    <button type="button" id="submitBtn" style="margin-left:20px;padding:8px 16px;background:#28a745;color:#fff;border:none;border-radius:4px;cursor:pointer;">æäº¤</button>
    </div>
</form>

<!-- åº•éƒ¨æ  -->
<footer class="site-bottombar" id="toTopBtn">
  <div class="bottombar__label">è¿”å›é¡¶éƒ¨</div>
  <img class="bottombar__logo" src="images/logo.png" alt="AX Guitar Logo"/>
</footer>

<script src="/js/main.js"></script>

<script>
// ç‚¹å‡»è¡Œé«˜äº®å¹¶æ›´æ–°æ€»ä»·
document.querySelectorAll("table").forEach(table => {
    let rows = table.querySelectorAll("tr[data-price]");
    rows.forEach(row => {
        row.addEventListener("click", () => {
            // åŒç±»å–æ¶ˆé«˜äº®
            rows.forEach(r => r.classList.remove("selected"));
            // å½“å‰è¡Œé«˜äº®
            row.classList.add("selected");
            updateTotal();
        });
    });
});

function updateTotal() {
    let total = 0;
    document.querySelectorAll("tr.selected").forEach(row => {
        total += parseFloat(row.getAttribute("data-price") || 0);
    });
    document.getElementById("summaryPrice").textContent = "Â¥" + total;
}

// ç‚¹å‡»æäº¤ - ä½¿ç”¨ EmailJS å‘é€é‚®ä»¶
document.getElementById("submitBtn").addEventListener("click", () => {
    // éªŒè¯å¿…å¡«å­—æ®µ
    const name = document.getElementById("name").value;
    if (!name) {
        alert("è¯·è¾“å…¥å§“å");
        return;
    }

    // æ”¶é›†æ‰€æœ‰é€‰ä¸­çš„é€‰é¡¹
    let selections = [];
    document.querySelectorAll("tr.selected").forEach(row => {
        let option = row.cells[0].textContent;
        let price = row.cells[1].textContent;
        selections.push(`${option} - ${price}`);
    });

    // å‡†å¤‡é‚®ä»¶å‚æ•°
    const emailParams = {
        to_email: "iqinzhe@gmail.com",  // æ”¶ä»¶äººé‚®ç®±
        from_name: name,
        customer_number: document.getElementById("number").value || "æœªæä¾›",
        notes: document.getElementById("notes").value || "æ— å¤‡æ³¨",
        selections: selections.join("\n"),
        total_price: document.getElementById("summaryPrice").textContent
    };

    // å‘é€é‚®ä»¶
    emailjs.send(
        "service_6q2tc8m",  // æ›¿æ¢ä¸ºä½ çš„ EmailJS Service ID
        "template_npq8364", // æ›¿æ¢ä¸ºä½ çš„ EmailJS Template ID
        emailParams
    )
    .then(function(response) {
        alert("æäº¤æˆåŠŸï¼æˆ‘ä»¬ä¼šå°½å¿«ä¸æ‚¨è”ç³»ã€‚");
        // å¯é€‰ï¼šé‡ç½®è¡¨å•
        document.getElementById("pricingForm").reset();
        document.querySelectorAll("tr.selected").forEach(row => {
            row.classList.remove("selected");
        });
        document.getElementById("summaryPrice").textContent = "Â¥0";
    }, function(error) {
        alert("æäº¤å¤±è´¥ï¼Œè¯·ç¨åå†è¯•ã€‚é”™è¯¯: " + JSON.stringify(error));
    });
});
</script>

</body>
</html>